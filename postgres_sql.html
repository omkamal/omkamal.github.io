<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PostgreSQL SQL Cheat Sheet</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #336791;
            --primary-dark: #2a5578;
            --primary-light: #4a89b9;
            --secondary: #8b5cf6;
            --accent: #06b6d4;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg-gradient: linear-gradient(135deg, #f0f4f8 0%, #e2e8f0 50%, #f0f4f8 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --card-border: rgba(51, 103, 145, 0.15);
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --code-bg: #1e293b;
            --code-text: #e2e8f0;
            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --radius-sm: 8px;
            --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 10px;
            line-height: 1.5;
            margin: 0;
            padding: 15mm 10mm;
            background: var(--bg-gradient);
            background-attachment: fixed;
            color: var(--text-primary);
            min-height: 100vh;
        }

        .home-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white !important;
            text-decoration: none;
            border-radius: 20px;
            font-size: 9px;
            font-weight: 500;
            margin-bottom: 10px;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .home-link:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-gap: 12px;
            width: 100%;
        }

        .container-1col {
            display: grid;
            grid-template-columns: 1fr;
            grid-gap: 12px;
            width: 100%;
        }

        h1 {
            grid-column: 1 / -1;
            text-align: center;
            font-size: 28px;
            font-weight: 700;
            margin: 0 0 15px 0;
            padding: 15px 0;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
        }

        h1::after {
            content: '';
            display: block;
            width: 60px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            margin: 10px auto 0;
            border-radius: 2px;
        }

        h2 {
            font-size: 12px;
            font-weight: 600;
            margin: 0 0 8px 0;
            color: var(--primary-dark);
            padding-bottom: 6px;
            border-bottom: 2px solid transparent;
            background: linear-gradient(90deg, var(--primary), var(--accent)) border-box;
            border-image: linear-gradient(90deg, var(--primary), var(--accent)) 1;
            border-image-slice: 0 0 1 0;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        ul {
            margin: 0;
            padding-left: 0;
            list-style: none;
        }

        li {
            margin-bottom: 6px;
            padding-left: 14px;
            position: relative;
            line-height: 1.6;
        }

        li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 6px;
            width: 5px;
            height: 5px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 50%;
        }

        .author {
            position: fixed;
            top: 10px;
            left: 10px;
            font-size: 9px;
            font-weight: 500;
            color: var(--text-muted);
            background: var(--card-bg);
            padding: 4px 10px;
            border-radius: 20px;
            box-shadow: var(--shadow-sm);
            backdrop-filter: blur(10px);
            z-index: 100;
        }

        .linkedin {
            position: fixed;
            top: 10px;
            right: 10px;
            font-size: 9px;
            z-index: 100;
        }

        .linkedin a {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            background: linear-gradient(135deg, #0077b5 0%, #005582 100%);
            color: white !important;
            text-decoration: none;
            border-radius: 20px;
            font-weight: 500;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .linkedin a:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .section {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 12px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--card-border);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--accent), var(--secondary));
            opacity: 0;
            transition: var(--transition);
        }

        .section:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
            border-color: var(--primary-light);
        }

        .section:hover::before {
            opacity: 1;
        }

        .section-span-2 {
            grid-column: span 2;
        }

        .section-span-3 {
            grid-column: span 3;
        }

        strong {
            color: var(--primary-dark);
            font-weight: 600;
        }

        code, pre {
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 9px;
            background: var(--code-bg) !important;
            color: var(--code-text) !important;
            border-radius: var(--radius-sm);
            padding: 6px 8px;
            margin: 4px 0;
            display: block;
            white-space: pre-wrap;
            word-wrap: break-word;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);
            border-left: 3px solid var(--primary);
            line-height: 1.5;
        }

        pre {
            padding: 10px;
        }

        @media print {
            body {
                width: 297mm;
                padding: 10mm;
                background: white;
            }
            .section {
                break-inside: avoid;
                box-shadow: none;
                border: 1px solid #e2e8f0;
            }
            .section:hover {
                transform: none;
            }
            .author, .linkedin, .home-link {
                display: none;
            }
        }

        @media screen and (max-width: 900px) {
            .container {
                grid-template-columns: repeat(2, 1fr);
            }
            .section-span-2, .section-span-3 {
                grid-column: span 2;
            }
        }

        @media screen and (max-width: 600px) {
            .container {
                grid-template-columns: 1fr;
            }
            .section-span-2, .section-span-3 {
                grid-column: span 1;
            }
            body {
                padding: 60px 15px 20px;
            }
        }
    </style>
</head>
<body>
    <a href="https://omkamal.github.io/" target="_blank" class="home-link">Home</a>
    <div class="author">Omar Hosney</div>
    <div class="linkedin"><a href="https://www.linkedin.com/in/okhosney">LinkedIn</a></div>
    <h1>PostgreSQL SQL Cheatsheet üêò</h1>
    <div class="container">
        <div class="section">
            <h2>üîç Schema & Meta</h2>
            <ul>
                <li>üìÇ <strong>List databases</strong>: <code>\l</code> or <code>SELECT datname FROM pg_database;</code></li>
                <li>üìã <strong>Show tables</strong>: <code>\dt</code></li>
                <li>üî¨ <strong>Show columns</strong>: <code>\d employees</code></li>
                <li>üß† <strong>All schemas</strong>: <code>SELECT schema_name FROM information_schema.schemata;</code></li>
                <li>üßæ <strong>Table DDL</strong>: <code>pg_dump -s -t employees mydb</code></li>
            </ul>
        </div>
        <div class="section section-span-2">
            <h2>üìù Basic Data Operations</h2>
            <ul>
                <li><strong>SELECT</strong> ‚Äì fetch data <br><code>SELECT name FROM employees;</code></li>
                <li><strong>INSERT</strong> ‚Äì add data <br><code>INSERT INTO employees(name, age) VALUES('John', 30);</code></li>
                <li><strong>UPDATE</strong> ‚Äì change data <br><code>UPDATE employees SET age = 31 WHERE name = 'John';</code></li>
                <li><strong>DELETE</strong> ‚Äì remove data <br><code>DELETE FROM employees WHERE name = 'John';</code></li>
            </ul>
        </div>
        <div class="section section-span-2">
            <h2>ü§ù Standard Joins</h2>
            <ul>
                <li><strong>INNER JOIN</strong> ‚Äì match both sides <br><code>SELECT * FROM emp INNER JOIN dept ON emp.dept_id = dept.id;</code></li>
                <li><strong>LEFT JOIN</strong> ‚Äì all left + match <br><code>SELECT * FROM emp LEFT JOIN dept ON emp.dept_id = dept.id;</code></li>
                <li><strong>RIGHT JOIN</strong> ‚Äì all right + match <br><code>SELECT * FROM emp RIGHT JOIN dept ON emp.dept_id = dept.id;</code></li>
                <li><strong>FULL JOIN</strong> ‚Äì everything <br><code>SELECT * FROM emp FULL JOIN dept ON emp.dept_id = dept.id;</code></li>
            </ul>
        </div>
        <div class="section">
            <h2>üîÑ Special Join</h2>
            <ul>
                <li><strong>CROSS JOIN</strong> ‚Äì cartesian <br><code>SELECT * FROM emp CROSS JOIN dept;</code></li>
            </ul>
        </div>
        <div class="section section-span-2">
            <h2>üñºÔ∏è Joins Visualized</h2>
            <div style="display: flex; flex-wrap: wrap; gap: 24px; justify-content: space-around;">
                <!-- INNER JOIN -->
                <div style="text-align: center;">
                    <svg width="80" height="60">
                        <circle cx="30" cy="30" r="20" fill="#bbb" fill-opacity="0.5" />
                        <circle cx="50" cy="30" r="20" fill="#bbb" fill-opacity="0.5" />
                        <ellipse cx="40" cy="30" rx="10" ry="20" fill="#3498db" fill-opacity="0.7" />
                    </svg>
                    <div style="font-size:12px;">INNER JOIN</div>
                </div>
                <!-- LEFT JOIN -->
                <div style="text-align: center;">
                    <svg width="80" height="60">
                        <circle cx="30" cy="30" r="20" fill="#3498db" fill-opacity="0.7" />
                        <circle cx="50" cy="30" r="20" fill="#bbb" fill-opacity="0.5" />
                    </svg>
                    <div style="font-size:12px;">LEFT JOIN</div>
                </div>
                <!-- RIGHT JOIN -->
                <div style="text-align: center;">
                    <svg width="80" height="60">
                        <circle cx="30" cy="30" r="20" fill="#bbb" fill-opacity="0.5" />
                        <circle cx="50" cy="30" r="20" fill="#3498db" fill-opacity="0.7" />
                    </svg>
                    <div style="font-size:12px;">RIGHT JOIN</div>
                </div>
                <!-- FULL JOIN -->
                <div style="text-align: center;">
                    <svg width="80" height="60">
                        <circle cx="30" cy="30" r="20" fill="#3498db" fill-opacity="0.7" />
                        <circle cx="50" cy="30" r="20" fill="#3498db" fill-opacity="0.7" />
                    </svg>
                    <div style="font-size:12px;">FULL JOIN</div>
                </div>
            </div>
        </div>
        <div class="section">
            <h2>üß™ Data Types</h2>
            <ul>
                <li><strong>INTEGER</strong>, <strong>BIGINT</strong> ‚Äì whole numbers</li>
                <li><strong>VARCHAR(n)</strong>, <strong>TEXT</strong> ‚Äì text values</li>
                <li><strong>BOOLEAN</strong> ‚Äì true/false</li>
                <li><strong>DATE</strong>, <strong>TIMESTAMP</strong> ‚Äì date/time</li>
                <li><strong>JSON/JSONB</strong> ‚Äì flexible data <br><code>SELECT data->>'name' FROM users;</code></li>
            </ul>
        </div>

        <div class="section">
            <h2>üèóÔ∏è Table Management</h2>
            <ul>
                <li><strong>CREATE</strong> ‚Äì new table <br><code>CREATE TABLE employees(id SERIAL, name TEXT);</code></li>
                <li><strong>DROP</strong> ‚Äì delete table <br><code>DROP TABLE employees;</code></li>
                <li><strong>ALTER</strong> ‚Äì change table <br><code>ALTER TABLE employees ADD email TEXT;</code></li>
            </ul>
        </div>
        <div class="section">
            <h2>üîé Query Clauses</h2>
            <ul>
                <li><strong>WHERE</strong> ‚Äì filter rows <br><code>SELECT * FROM employees WHERE age > 25;</code></li>
                <li><strong>ORDER BY</strong> ‚Äì sort rows <br><code>SELECT * FROM employees ORDER BY age DESC;</code></li>
                <li><strong>ORDER BY ASC</strong> ‚Äì ascending (default) <br><code>SELECT * FROM employees ORDER BY name ASC;</code></li>
                <li><strong>ORDER BY DESC</strong> ‚Äì descending <br><code>SELECT * FROM employees ORDER BY salary DESC;</code></li>
                <li><strong>ORDER BY multiple columns</strong> <br><code>SELECT * FROM employees ORDER BY dept ASC, salary DESC;</code></li>
                <li><strong>GROUP BY</strong> ‚Äì aggregate <br><code>SELECT dept, COUNT(*) FROM employees GROUP BY dept;</code></li>
            </ul>
        </div>
        <div class="section">
            <h2>üî¢ Aggregate Functions</h2>
            <ul>
                <li><strong>COUNT(*)</strong> ‚Äì total rows <br><code>SELECT COUNT(*) FROM employees;</code></li>
                <li><strong>AVG(age)</strong> ‚Äì average <br><code>SELECT AVG(age) FROM employees;</code></li>
                <li><strong>SUM(salary)</strong> ‚Äì total salary <br><code>SELECT SUM(salary) FROM employees;</code></li>
                <li><strong>MAX(age)</strong> ‚Äì oldest <br><code>SELECT MAX(age) FROM employees;</code></li>
                <li><strong>COALESCE(a,b)</strong> ‚Äì default <br><code>SELECT COALESCE(phone, 'N/A') FROM employees;</code></li>
            </ul>
        </div>
        <div class="section">
            <h2>‚ûó Arithmetic & Rounding</h2>
            <ul>
                <li><strong>ROUND(num, n)</strong> ‚Äì round to n digits <br><code>SELECT ROUND(salary, 2) FROM employees;</code></li>
                <li><strong>ROUND(num, -n)</strong> ‚Äì round to left of decimal <br><code>SELECT ROUND(salary, -3) FROM employees;</code></li>
                <li><strong>CEIL(num)</strong> ‚Äì round up <br><code>SELECT CEIL(price) FROM products;</code></li>
                <li><strong>FLOOR(num)</strong> ‚Äì round down <br><code>SELECT FLOOR(price) FROM products;</code></li>
                <li><strong>Arithmetic (+, -, *, /)</strong> <br><code>SELECT price * 1.1 AS increased FROM products;</code></li>
                <li><strong>Divide floats</strong> <br><code>SELECT 5.0 / 2 AS result;</code></li>
                <li><strong>Alias with arithmetic</strong> <br><code>SELECT salary * 1.05 AS new_salary FROM employees;</code></li>
            </ul>
        </div>
        <div class="section">
            <h2>‚è∞ Date & Time Functions</h2>
            <ul>
                <li><strong>NOW()</strong> ‚Äì current timestamp <br><code>SELECT NOW();</code></li>
                <li><strong>CURRENT_DATE</strong> ‚Äì current date <br><code>SELECT CURRENT_DATE;</code></li>
                <li><strong>CURRENT_TIME</strong> ‚Äì current time <br><code>SELECT CURRENT_TIME;</code></li>
                <li><strong>AGE()</strong> ‚Äì interval between dates <br><code>SELECT AGE(NOW(), '2000-01-01');</code></li>
                <li><strong>DATE_TRUNC()</strong> ‚Äì truncate to unit <br><code>SELECT DATE_TRUNC('month', NOW());</code></li>
                <li><strong>EXTRACT()</strong> ‚Äì get part of date/time <br><code>SELECT EXTRACT(YEAR FROM NOW());</code></li>
            </ul>
        </div>
        <div class="section">
            <h2>üîê Permissions</h2>
            <ul>
                <li><strong>GRANT</strong> ‚Äì give access <br><code>GRANT SELECT ON employees TO analyst;</code></li>
                <li><strong>REVOKE</strong> ‚Äì remove access <br><code>REVOKE SELECT ON employees FROM analyst;</code></li>
            </ul>
        </div>
        <div class="section">
            <h2>üì§ Exporting Data from PostgreSQL</h2>
            <ul>
                <li><strong>Export entire database (SQL dump):</strong><br>
                    <code>pg_dump -U username dbname > dbname.sql</code></li>
                <li><strong>Export a table to CSV (psql):</strong><br>
                    <code>\copy tablename TO 'output.csv' CSV HEADER</code></li>
                <li><strong>Export a table to CSV (SQL):</strong><br>
                    <code>COPY tablename TO '/path/output.csv' DELIMITER ',' CSV HEADER;</code></li>
                <li><strong>Export schema only:</strong><br>
                    <code>pg_dump -s -U username dbname > schema.sql</code></li>
            </ul>
        </div>
        <div class="section section-span-2">
            <h2>üì• Importing Data into PostgreSQL</h2>
            <ul>
                <li><strong>Import SQL dump:</strong><br>
                    <code>psql -U username dbname &lt; dbname.sql</code></li>
                <li><strong>Import CSV (psql):</strong><br>
                    <code>\copy tablename FROM 'input.csv' CSV HEADER</code></li>
                <li><strong>Import CSV (SQL):</strong><br>
                    <code>COPY tablename FROM '/path/input.csv' DELIMITER ',' CSV HEADER;</code></li>
                <li><strong>Import Parquet (with extension):</strong><br>
                    <code>CREATE EXTENSION parquet_fdw;</code><br>
                    <code>CREATE SERVER parquet_srv FOREIGN DATA WRAPPER parquet_fdw;</code><br>
                    <code>CREATE FOREIGN TABLE parquet_table (...) SERVER parquet_srv OPTIONS (filename '/path/file.parquet');</code>
                </li>
                <li><strong>Import from other DBs (brief):</strong><br>
                    Use <code>pgloader</code>, <code>postgres_fdw</code>, or <code>DB-specific tools</code> for migrations.</li>
            </ul>
        </div>
        <div class="section section-span-2">
            <h2>üóÇÔ∏è Working with JSON Fields</h2>
            <ul>
                <li><strong>Select a JSON property:</strong><br>
                    <code>SELECT data->>'name' FROM users;</code></li>
                <li><strong>Filter by JSON property:</strong><br>
                    <code>SELECT * FROM users WHERE data->>'status' = 'active';</code></li>
                <li><strong>Update a JSON property:</strong><br>
                    <code>UPDATE users SET data = jsonb_set(data, '{name}', '"Omar"') WHERE id = 1;</code></li>
                <li><strong>Index a JSONB field:</strong><br>
                    <code>CREATE INDEX idx_users_data ON users USING GIN (data jsonb_path_ops);</code></li>
            </ul>
        </div>
        <div class="section">
            <h2>üî≠ Creating & Using Views</h2>
            <ul>
                <li><strong>Create a view:</strong><br>
                    <code>CREATE VIEW active_employees AS SELECT * FROM employees WHERE active = true;</code></li>
                <li><strong>Query a view:</strong><br>
                    <code>SELECT * FROM active_employees;</code></li>
                <li><strong>Drop a view:</strong><br>
                    <code>DROP VIEW active_employees;</code></li>
            </ul>
        </div>
        <div class="section section-span-2">
            <h2>üß© Building Nested SQL Queries</h2>
            <ul>
                <li><strong>Subquery in SELECT:</strong><br>
<pre><code>SELECT name,
       (SELECT MAX(salary)
          FROM employees) AS max_salary
  FROM employees;
</code></pre></li>
                <li><strong>Subquery in FROM:</strong><br>
<pre><code>SELECT dept, avg_age
  FROM (
        SELECT dept, AVG(age) AS avg_age
          FROM employees
         GROUP BY dept
       ) AS dept_ages;
</code></pre></li>
                <li><strong>Subquery in WHERE:</strong><br>
<pre><code>SELECT *
  FROM employees
 WHERE salary > (SELECT AVG(salary)
                   FROM employees);
</code></pre></li>
                <li><strong>Correlated subquery:</strong><br>
<pre><code>SELECT name
  FROM employees e
 WHERE salary > (SELECT AVG(salary)
                   FROM employees
                  WHERE dept = e.dept);
</code></pre></li>
            </ul>
        </div>
        <div class="section">
            <h2>üîë Essential SQL Keywords I</h2>
            <ul>
                <li><strong>DISTINCT</strong> ‚Äì remove duplicates<br><code>SELECT DISTINCT dept FROM employees;</code></li>
                <li><strong>LIMIT & OFFSET</strong> ‚Äì restrict results<br><code>SELECT * FROM employees LIMIT 5 OFFSET 10;</code></li>
                <li><strong>UNION / UNION ALL</strong> ‚Äì combine results<br><code>SELECT name FROM a UNION SELECT name FROM b;</code></li>
                <li><strong>EXISTS</strong> ‚Äì check for subquery existence<br><code>SELECT name FROM employees WHERE EXISTS (SELECT 1 FROM dept WHERE dept.id = employees.dept_id);</code></li>
                <li><strong>IN</strong> ‚Äì match any in list<br><code>SELECT * FROM employees WHERE dept IN ('HR', 'IT');</code></li>
                <li><strong>BETWEEN</strong> ‚Äì range filter<br><code>SELECT * FROM employees WHERE age BETWEEN 20 AND 30;</code></li>
                <li><strong>LIKE / ILIKE</strong> ‚Äì pattern matching (ILIKE is case-insensitive)<br><code>SELECT * FROM employees WHERE name LIKE 'A%';</code></li>
                <li><strong>CASE</strong> ‚Äì conditional logic<br><code>SELECT name, CASE WHEN age > 30 THEN 'Senior' ELSE 'Junior' END FROM employees;</code></li>
                <li><strong>CAST</strong> ‚Äì convert data types<br><code>SELECT '123'::INTEGER;</code></li>
                <li><strong>IS NULL / IS NOT NULL</strong> ‚Äì null checks<br><code>SELECT * FROM employees WHERE email IS NULL;</code></li>
                <li><strong>DEFAULT</strong> ‚Äì set default value<br><code>CREATE TABLE t (id SERIAL, active BOOLEAN DEFAULT true);</code></li>
                <li><strong>PRIMARY KEY</strong> ‚Äì unique row identifier<br><code>CREATE TABLE t (id SERIAL PRIMARY KEY);</code></li>
                <li><strong>FOREIGN KEY</strong> ‚Äì reference other table<br><code>CREATE TABLE orders (user_id INT REFERENCES users(id));</code></li>

            </ul>
        </div>
        <div class="section section-span-2">
            <h2>üîé WHERE vs HAVING</h2>
            <ul>
                <li><strong>WHERE</strong> filters rows <i>before</i> aggregation (GROUP BY), and cannot use column aliases created in SELECT.<br>
                <strong>HAVING</strong> filters groups <i>after</i> aggregation, and can use aliases from SELECT.</li>
                <li><strong>WHERE Example:</strong><br>
<pre><code>SELECT dept, AVG(salary) AS avg_salary
  FROM employees
 WHERE salary > 50000
 GROUP BY dept;
</code></pre></li>
                <li><strong>HAVING Example (with alias):</strong><br>
<pre><code>SELECT dept, AVG(salary) AS avg_salary
  FROM employees
 GROUP BY dept
HAVING avg_salary > 60000;
</code></pre></li>
            </ul>
            <div style="font-size:11px; color:#555; margin-top:6px;">
                <strong>Note:</strong> In PostgreSQL, <code>WHERE</code> cannot use <code>avg_salary</code> because aliases are not available until after the SELECT clause is processed. <code>HAVING</code> can use <code>avg_salary</code> because it is evaluated after aggregation and SELECT.
            </div>
        </div>

        <div class="section">
            <h2>üß© Essential SQL Keywords II</h2>
            <ul>
                <li><strong>SERIAL</strong> ‚Äì auto-increment integer<br><code>CREATE TABLE t (id SERIAL PRIMARY KEY);</code></li>
                <li><strong>UNIQUE</strong> ‚Äì enforce unique values<br><code>CREATE TABLE t (email TEXT UNIQUE);</code></li>
                <li><strong>CHECK</strong> ‚Äì enforce condition<br><code>CREATE TABLE t (age INT CHECK (age >= 18));</code></li>
                <li><strong>INDEX</strong> ‚Äì speed up lookups<br><code>CREATE INDEX idx_name ON employees(name);</code></li>
                <li><strong>EXPLAIN</strong> ‚Äì show query plan<br><code>EXPLAIN SELECT * FROM employees;</code></li>
                <li><strong>ANALYZE</strong> ‚Äì collect stats<br><code>ANALYZE employees;</code></li>
                <li><strong>WITH (CTE)</strong> ‚Äì common table expressions<br><code>WITH recent AS (SELECT * FROM employees WHERE hired > '2024-01-01') SELECT * FROM recent;</code></li>
                <li><strong>RETURNING</strong> ‚Äì return rows from DML<br><code>INSERT INTO employees(name) VALUES('Anna') RETURNING id;</code></li>
             </ul>
        </div>
        <div class="section">
            <h2>üìä SQL Order of Execution</h2>
            <div style="display: flex; flex-direction: column; align-items: center;">
                <svg width="220" height="320" style="margin-bottom: 8px;">
                    <g font-size="11" font-family="Roboto, sans-serif">
                        <rect x="40" y="10" width="140" height="28" rx="8" fill="#e3f2fd" stroke="#2196f3" />
                        <text x="110" y="29" text-anchor="middle">FROM / JOIN</text>

                        <rect x="40" y="48" width="140" height="28" rx="8" fill="#fce4ec" stroke="#e91e63" />
                        <text x="110" y="67" text-anchor="middle">WHERE</text>

                        <rect x="40" y="86" width="140" height="28" rx="8" fill="#fffde7" stroke="#fbc02d" />
                        <text x="110" y="105" text-anchor="middle">GROUP BY</text>

                        <rect x="40" y="124" width="140" height="28" rx="8" fill="#ede7f6" stroke="#7e57c2" />
                        <text x="110" y="143" text-anchor="middle">HAVING</text>

                        <rect x="40" y="162" width="140" height="28" rx="8" fill="#e8f5e9" stroke="#43a047" />
                        <text x="110" y="181" text-anchor="middle">SELECT</text>

                        <rect x="40" y="200" width="140" height="28" rx="8" fill="#f3e5f5" stroke="#ab47bc" />
                        <text x="110" y="219" text-anchor="middle">DISTINCT</text>

                        <rect x="40" y="238" width="140" height="28" rx="8" fill="#e0f2f1" stroke="#00897b" />
                        <text x="110" y="257" text-anchor="middle">ORDER BY</text>

                        <rect x="40" y="276" width="140" height="28" rx="8" fill="#fbe9e7" stroke="#ff7043" />
                        <text x="110" y="295" text-anchor="middle">LIMIT / OFFSET</text>

                        <!-- Arrows -->
                        <g stroke="#888" stroke-width="2">
                            <line x1="110" y1="38" x2="110" y2="48" marker-end="url(#arrow)" />
                            <line x1="110" y1="76" x2="110" y2="86" marker-end="url(#arrow)" />
                            <line x1="110" y1="114" x2="110" y2="124" marker-end="url(#arrow)" />
                            <line x1="110" y1="152" x2="110" y2="162" marker-end="url(#arrow)" />
                            <line x1="110" y1="190" x2="110" y2="200" marker-end="url(#arrow)" />
                            <line x1="110" y1="228" x2="110" y2="238" marker-end="url(#arrow)" />
                            <line x1="110" y1="266" x2="110" y2="276" marker-end="url(#arrow)" />
                        </g>
                        <defs>
                            <marker id="arrow" markerWidth="8" markerHeight="8" refX="4" refY="4" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L8,4 L0,8 L2,4 Z" fill="#888" />
                            </marker>
                        </defs>
                    </g>
                </svg>
                <div style="font-size:10px; color:#555; text-align:center; max-width:230px;">
                    <strong>Order of execution in SQL:</strong> <br>
                    FROM/JOIN ‚Üí WHERE ‚Üí GROUP BY ‚Üí HAVING ‚Üí SELECT ‚Üí DISTINCT ‚Üí ORDER BY ‚Üí LIMIT/OFFSET
                </div>
            </div>
        </div>

    </div>
</body>
</html>